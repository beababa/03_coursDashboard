---
title: "Bases R"
author: "B. Maranget"
date: "20/01/2021"
output: 
  html_document: 
    number_sections: yes
    toc: yes
editor_options: 
  chunk_output_type: console
---


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
knitr::opts_chunk$set(cache = TRUE)
# Passer la valeur suivante à TRUE pour reproduire les extractions.
knitr::opts_chunk$set(eval = TRUE)
knitr::opts_chunk$set(warning = FALSE)
```

# Objet

Bases R

source : https://github.com/rstudio/cheatsheets/blob/main/base-r.pdf


# Objets R


## Vecteur et dataframe

### Creation

```{r}
nom <- c("Zachary", "Pierre", "Linda")
notes <- c(16,12,13)
```



3 trucs pour survivre :

- Alt + - pour l'opérateur d'assignation

- tabulation pour la complétion

- Ctrl + entrée pour executer la ligne de code

### Indexation

```{r}
nom [1]
notes [2]
df [1,2]
```

```{r}
df$nom
df$notes
```

### Operation

```{r}
#sum(df$notes)
sum(notes)
```

## Exercice


Créer un dataframe sur 3 villes et leur nombre d'habitants
Trouver la moyenne du nombre d'habitants.



# Boucles


On cherche à faire un graphique de chacun des résultats


## Import de la donnée


```{r}
data <- read.csv("data/bondyElection.csv", fileEncoding = "UTF-8", dec = ",")
head(data)
summary(data)
```

## Nettoyage

### Problème des champs totaux

```{r}
data$Bureau.de.vote
data <-  data [-c(33,34),]
```


### Les noms des candidats

```{r}
candidat  <- names(data)[8:12]
candidat
liste <- strsplit(candidat,"\\.\\.\\.")
liste [[5]][3]
candidat <- sapply(liste, '[', 3)
names (data) [8:12] <- candidat
names(data)
```


## Graphique

```{r}
png(height = 800, width = 600, filename = "img/resultat.png")
par(mfrow = c(4,3))
for (i in 2:12){
  barplot(data [,i], main = names(data) [i])
}
dev.off()
```

![](img/resultat.png)

